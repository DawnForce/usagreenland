<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>Market Overview — Business Intelligence | USAGreenland.com</title>
    <meta name="description"
        content="High-level market intelligence across key U.S.–Greenland sectors, signals, and strategic activity." />

    <link rel="canonical" href="https://usagreenland.com/business/market-overview.html" />

    <meta property="og:type" content="website" />
    <meta property="og:site_name" content="USAGreenland.com" />
    <meta property="og:title" content="Market Overview — USAGreenland.com" />
    <meta property="og:description"
        content="A structured view of sectors, signals, and market conditions shaping U.S.–Greenland business activity." />
    <meta property="og:image" content="../assets/og-business.jpg" />

    <link rel="stylesheet" href="../styles.css?v=27.1" />

    <style>
        /* Page-local hardening only */

        .hero.hero--market {
            position: relative;
            background-image: url("../assets/hero-sector1.jpg");
            background-size: cover;
            background-position: center;
            overflow: hidden;
        }

        .hero.hero--market .hero__overlay {
            position: absolute;
            inset: 0;
            background: linear-gradient(90deg,
                    rgba(0, 0, 0, 0.80) 0%,
                    rgba(0, 0, 0, 0.55) 45%,
                    rgba(0, 0, 0, 0.25) 100%);
        }

        .hero.hero--market .hero__inner {
            position: relative;
            z-index: 2;
        }

        .signals {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 14px;
        }

        .signal {
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 14px;
            padding: 14px;
            background: rgba(255, 255, 255, 0.03);
        }

        .signal h4 {
            margin-bottom: 6px;
        }

        .signal p {
            font-size: 14px;
            opacity: 0.9;
        }

        .note {
            font-size: 14px;
            opacity: 0.7;
        }

        /* Phase 43 — Calm editorial reveal (no animations) */
        #market-signals-list li.snapshot-row {
            cursor: pointer;
        }

        #market-signals-list li.snapshot-row:focus {
            outline: 2px solid rgba(255, 255, 255, 0.25);
            outline-offset: 2px;
        }

        #market-signals-list ul.snapshot-articles {
            margin: 8px 0 10px 16px;
            padding-left: 16px;
        }

        #market-signals-list ul.snapshot-articles li {
            margin: 4px 0;
        }

        #market-signals-list ul.snapshot-articles a {
            text-decoration: none;
        }

        #market-signals-list ul.snapshot-articles a:hover {
            text-decoration: underline;
        }

        #market-signals-list .snapshot-hint {
            display: block;
            font-size: 12px;
            opacity: 0.65;
            margin-top: 4px;
        }
    </style>
</head>

<body>
    <!--
    SIGNALS_V1
    {
      "signals": [
        {
          "type": "policy",
          "sector": "multi-sector",
          "scope": "bilateral",
          "horizon": "mid-long",
          "direction": "emerging",
          "confidence": "medium"
        },
        {
          "type": "infrastructure",
          "sector": "infrastructure",
          "scope": "strategic",
          "horizon": "long",
          "direction": "emerging",
          "confidence": "medium"
        }
      ]
    }
    -->

    <!-- HERO -->
    <header class="hero hero--market" role="banner">
        <div class="hero__overlay"></div>
        <div class="hero__inner">
            <div class="brand">
                <h1 class="brand__title">Market Overview</h1>
                <p class="brand__tagline">Business Intelligence</p>
            </div>

            <p class="hero__subhead">
                A high-level view of sectors, signals, and strategic activity shaping U.S.–Greenland commerce.
            </p>
        </div>
    </header>

    <!-- NAV -->
    <nav class="nav" aria-label="Primary navigation">
        <div class="nav__inner">
            <a class="nav__home" href="../index.html">UG</a>
            <ul class="nav__links">
                <li><a href="../news.html">News & Analysis</a></li>
                <li><a href="../travel.html">Travel Guide</a></li>
                <li><a href="../business.html" aria-current="page">Business</a></li>
                <li><a href="../shop.html">Shop</a></li>
                <li><a href="../premium.html">Premium</a></li>
                <li><a href="../about.html">About</a></li>
            </ul>
        </div>
    </nav>

    <!-- Phase 42: Snapshot belongs BELOW NAV; leaving markup here but we will move it in Phase 42 placement fix -->
    <section id="market-signals" class="market-signals">
        <h2>Market Activity Snapshot</h2>
        <ul id="market-signals-list">
            <li>Loading market activity…</li>
        </ul>
    </section>

    <main>

        <!-- SECTOR INDEX -->
        <section class="section section--latest">
            <div class="container">
                <div class="section__head">
                    <h2>Tracked Sectors</h2>
                    <p class="section__subhead">
                        Core domains currently monitored for activity, investment signals, and strategic movement.
                    </p>
                </div>

                <div class="latest">
                    <a class="card" href="sectors/critical-minerals.html">
                        <p class="card__kicker">Resources</p>
                        <h3 class="card__title">Critical Minerals</h3>
                        <p>Extraction, policy signals, and strategic relevance.</p>
                        <p class="card__meta">Sector intelligence</p>
                    </a>

                    <a class="card" href="sectors/energy-power.html">
                        <p class="card__kicker">Energy</p>
                        <h3 class="card__title">Energy & Power</h3>
                        <p>Generation, renewables, and grid infrastructure.</p>
                        <p class="card__meta">Sector intelligence</p>
                    </a>

                    <a class="card" href="sectors/infrastructure-construction.html">
                        <p class="card__kicker">Infrastructure</p>
                        <h3 class="card__title">Infrastructure</h3>
                        <p>Ports, airports, logistics, and capital works.</p>
                        <p class="card__meta">Sector intelligence</p>
                    </a>

                    <a class="card" href="sectors/defense-strategic-presence.html">
                        <p class="card__kicker">Defense</p>
                        <h3 class="card__title">Defense & Strategic Presence</h3>
                        <p>Security, coordination, and Arctic posture.</p>
                        <p class="card__meta">Sector intelligence</p>
                    </a>

                    <a class="card" href="sectors/tourism-hospitality.html">
                        <p class="card__kicker">Tourism</p>
                        <h3 class="card__title">Tourism & Hospitality</h3>
                        <p>Visitor flows, access, and development signals.</p>
                        <p class="card__meta">Sector intelligence</p>
                    </a>

                    <a class="card" href="sectors/technology-communications.html">
                        <p class="card__kicker">Technology</p>
                        <h3 class="card__title">Technology & Communications</h3>
                        <p>Connectivity, satellites, and resilience.</p>
                        <p class="card__meta">Sector intelligence</p>
                    </a>
                </div>
            </div>
        </section>

        <!-- ACTIVE SIGNALS -->
        <section class="section">
            <div class="container">
                <div class="section__head">
                    <h2>Active Signals</h2>
                    <p class="section__subhead">
                        Early indicators and developments currently under observation.
                    </p>
                </div>

                <div class="signals">
                    <div class="signal">
                        <h4>Infrastructure Acceleration</h4>
                        <p>Increased feasibility and planning activity around ports and airfields.</p>
                    </div>

                    <div class="signal">
                        <h4>Minerals Policy Alignment</h4>
                        <p>Shifts in regulatory posture tied to allied supply-chain security.</p>
                    </div>

                    <div class="signal">
                        <h4>Arctic Logistics Interest</h4>
                        <p>Commercial interest in transit routes and staging infrastructure.</p>
                    </div>

                    <div class="signal">
                        <h4>Defense-Adjacent Investment</h4>
                        <p>Dual-use infrastructure discussions increasing across sectors.</p>
                    </div>
                </div>

                <p class="note" style="margin-top:12px;">
                    Signals are qualitative and observational. Quantitative dashboards will follow.
                </p>
            </div>
        </section>

    </main>

    <footer class="footer">
        <div class="container footer__inner">
            <p>© 2026 USAGreenland.com • Total Access</p>
            <div class="footer__links">
                <a href="../about.html">Contact</a>
                <a href="../premium.html">Premium</a>
                <a href="../news.html">News</a>
            </div>
        </div>
    </footer>

</body>

<script>
    // ============================================================
    // USAGreenland.com — Market Overview
    // Phase 42 (LOCKED): Reader-Facing Snapshot
    // Phase 43 (LOCKED): Click-Through Attribution
    // Phase 44A (LOCKED): Soft Premium Gate (preview)
    // Phase 44B (LOCKED): Reader-Friendly Copy
    // ============================================================

    // ------------------------------------------------------------
    // OWNER OVERRIDE (you always see everything)
    // ------------------------------------------------------------
    const IS_SITE_OWNER = true;

    // ------------------------------------------------------------
    // VISIBILITY CONFIG (Phase 44A)
    // ------------------------------------------------------------
    const ATTRIBUTION_PREVIEW_COUNT = 2;

    // ------------------------------------------------------------
    // Sector label formatter
    // ------------------------------------------------------------
    const formatSector = (slug) => {
        if (!slug || typeof slug !== 'string') return null;

        const clean = slug.trim().toLowerCase();

        if (
            clean === 'multi-sector' ||
            clean === 'sector_name' ||
            clean === 'sector-name'
        ) {
            return null;
        }

        return clean
            .split('-')
            .filter(Boolean)
            .map(w => w.charAt(0).toUpperCase() + w.slice(1))
            .join(' ');
    };

    // ------------------------------------------------------------
    // Filename → human fallback
    // ------------------------------------------------------------
    const humanizeFilename = (path) => {
        return String(path || '')
            .split('/')
            .pop()
            .replace(/\.html?$/i, '')
            .replace(/[-_]+/g, ' ')
            .replace(/\b\w/g, c => c.toUpperCase())
            .trim() || 'Article';
    };

    // ------------------------------------------------------------
    // Resolve clean, reader-friendly titles
    // ------------------------------------------------------------
    const resolveTitle = async (path) => {
        try {
            const res = await fetch(path, { method: 'GET' });
            if (!res.ok) throw new Error('title fetch failed');

            const html = await res.text();
            const match = html.match(/<title>(.*?)<\/title>/i);

            if (match && match[1]) {
                let title = match[1];

                // Normalize dash variants
                title = title.replace(/[–—]/g, '—');

                // Strip site / SEO suffixes
                title = title
                    .replace(/\s*—\s*Business Sector Overview\s*\|\s*USAGreenland\.com$/i, '')
                    .replace(/\s*—\s*Business Intelligence\s*\|\s*USAGreenland\.com$/i, '')
                    .replace(/\s*\|\s*USAGreenland\.com$/i, '')
                    .replace(/\s*—\s*USAGreenland\.com$/i, '')
                    .trim();

                return title;
            }
        } catch (e) {
            // silent fallback
        }

        return humanizeFilename(path);
    };

    // ------------------------------------------------------------
    // Build attribution list (Phase 43 + 44)
    // ------------------------------------------------------------
    const makeAttributionList = async (paths, ul) => {
        const uniq = Array.from(new Set((paths || []).filter(Boolean)));

        if (uniq.length === 0) {
            const li = document.createElement('li');
            li.textContent = 'No sources available.';
            ul.appendChild(li);
            return;
        }

        const isOpen = IS_SITE_OWNER;
        const limit = isOpen ? uniq.length : ATTRIBUTION_PREVIEW_COUNT;

        for (let i = 0; i < uniq.length; i++) {
            if (i === limit && !isOpen) {
                const li = document.createElement('li');
                li.className = 'snapshot-gate-note';
                li.textContent =
                    'More detail on where this activity is coming from is available with Premium.';
                ul.appendChild(li);
                break;
            }

            const path = uniq[i];
            const li = document.createElement('li');
            const a = document.createElement('a');

            a.href = path;
            a.target = '_self'; // LOCKED
            a.rel = 'noopener';
            a.textContent = await resolveTitle(path);

            li.appendChild(a);
            ul.appendChild(li);
        }
    };

    // ------------------------------------------------------------
    // Fetch + render Market Activity Snapshot
    // ------------------------------------------------------------
    fetch('/tools/signals/market_rollup.json')
        .then(res => {
            if (!res.ok) throw new Error('Rollup fetch failed');
            return res.json();
        })
        .then(data => {
            const list = document.getElementById('market-signals-list');
            list.innerHTML = '';

            if (!Array.isArray(data) || data.length === 0) {
                list.innerHTML = '<li>Signals unavailable.</li>';
                return;
            }

            const rows = data
                .map(item => {
                    const label = formatSector(item?.sector);
                    if (!label) return null;

                    return {
                        label,
                        activity: item.activity || 'Low',
                        sourceCount: Number(item.sourceCount || 0),
                        articles: Array.isArray(item.articles) ? item.articles : []
                    };
                })
                .filter(Boolean)
                .sort((a, b) => a.label.localeCompare(b.label));

            if (rows.length === 0) {
                list.innerHTML = '<li>Signals unavailable.</li>';
                return;
            }

            rows.forEach(row => {
                const li = document.createElement('li');
                li.className = 'snapshot-row';
                li.setAttribute('aria-expanded', 'false');

                const sourcesLabel = row.sourceCount === 1 ? 'source' : 'sources';

                // Summary line
                const summary = document.createElement('div');
                summary.className = 'snapshot-summary';
                summary.textContent =
                    `${row.label} — Market Activity: ${row.activity} (${row.sourceCount} ${sourcesLabel})`;

                // Hint line (only interactive affordance)
                const hint = document.createElement('span');
                hint.className = 'snapshot-hint';
                hint.textContent = 'See what reporting this signal is based on.';
                hint.tabIndex = 0;
                hint.setAttribute('role', 'button');

                li.appendChild(summary);
                li.appendChild(hint);

                li.dataset.articles = JSON.stringify(row.articles || []);

                const ul = document.createElement('ul');
                ul.className = 'snapshot-articles';
                ul.hidden = true;

                let hydrated = false;

                const toggle = async () => {
                    const willOpen = ul.hidden === true;
                    ul.hidden = !ul.hidden;
                    li.setAttribute('aria-expanded', String(willOpen));

                    if (!willOpen || hydrated) return;

                    hydrated = true;
                    const paths = JSON.parse(li.dataset.articles || '[]');
                    await makeAttributionList(paths, ul);
                };

                hint.addEventListener('click', (e) => {
                    e.stopPropagation();
                    toggle();
                });

                hint.addEventListener('keydown', (e) => {
                    if (e.key === 'Enter' || e.key === ' ') {
                        e.preventDefault();
                        toggle();
                    }
                });

                list.appendChild(li);
                list.appendChild(ul);
            });
        })
        .catch(() => {
            document.getElementById('market-signals-list').innerHTML =
                '<li>Signals unavailable.</li>';
        });
</script>

</html>